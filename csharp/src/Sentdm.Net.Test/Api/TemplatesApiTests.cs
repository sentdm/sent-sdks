/*
 * Sent.dm Core API
 *
 * Sent.dm is a unified messaging API that enables developers to seamlessly send messages across multiple channels including SMS and WhatsApp. It provides programmatic management of customer accounts, messaging capabilities with intelligent routing, message delivery, and template management. The API supports creating, updating, and managing customer profiles, sending messages using templates, retrieving contact information, and handling templates across different messaging channels.
 *
 * The version of the OpenAPI document: 1.1.0
 * Contact: developers@sent.dm
 * Generated by: https://konfigthis.com
 */

using System;
using System.IO;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Reflection;
using RestSharp;
using Xunit;

using Sentdm.Net.Client;
using Sentdm.Net.Api;
using Sentdm.Net.Model;

namespace Sentdm.Net.Test.Api
{
    /// <summary>
    ///  Class for testing TemplatesApi
    /// </summary>
    public class TemplatesApiTests : IDisposable
    {
        private Sentdm client;

        public TemplatesApiTests()
        {
            client = new Sentdm();
            client.SetBasePath("http://127.0.0.1:4010");
            // Configure API key authorization: ApiKey
            client.SetApiKey("YOUR_API_KEY");
            // Configure token for authorization
            client.SetAccessToken("YOUR_TOKEN");

        }

        public void Dispose()
        {
            // Cleanup when everything is done.
        }

        /// <summary>
        /// Test CreateTemplate
        /// </summary>
        [Fact]
        public void CreateTemplateTest()
        {
            var customerId = "customerId_example"; // Unique identifier of the customer creating the template
            var name = "name_example"; // Name of the template for identification purposes
            
            // Template creation details including customer ID and template name
            var templateCreateRequest = new TemplateCreateRequest(
                customerId,
                name
            );
            
            try
            {
                // Create a new message template
                ResponsesTemplateResponse result = client.Templates.CreateTemplate(templateCreateRequest);
                Console.WriteLine(result);
            }
            catch (ApiException e)
            {
                Console.WriteLine("Exception when calling TemplatesApi.CreateTemplate: " + e.Message);
                Console.WriteLine("Status Code: "+ e.ErrorCode);
                Console.WriteLine(e.StackTrace);
            }
            catch (ClientException e)
            {
                Console.WriteLine(e.Response.StatusCode);
                Console.WriteLine(e.Response.RawContent);
                Console.WriteLine(e.InnerException);
            }
        }

        /// <summary>
        /// Test GetTemplatesForCustomer
        /// </summary>
        [Fact]
        public void GetTemplatesForCustomerTest()
        {
            var customerId = "customerId_example"; // Unique identifier of the customer
            
            try
            {
                // Retrieve all templates for a customer
                List<ResponsesTemplateResponse> result = client.Templates.GetTemplatesForCustomer(customerId);
                Console.WriteLine(result);
            }
            catch (ApiException e)
            {
                Console.WriteLine("Exception when calling TemplatesApi.GetTemplatesForCustomer: " + e.Message);
                Console.WriteLine("Status Code: "+ e.ErrorCode);
                Console.WriteLine(e.StackTrace);
            }
            catch (ClientException e)
            {
                Console.WriteLine(e.Response.StatusCode);
                Console.WriteLine(e.Response.RawContent);
                Console.WriteLine(e.InnerException);
            }
        }
    }
}
